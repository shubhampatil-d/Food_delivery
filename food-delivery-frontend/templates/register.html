{% extends 'base.html' %}

{% block title %}Register - FoodieXpress{% endblock %}

{% block content %}
<!-- Registration Form Section -->
<div class="row justify-content-center align-items-center min-vh-70">
  <div class="col-md-7 col-lg-6">
    <div class="card shadow-sm p-4">
      <div class="card-body">
        <h2 class="card-title text-center mb-4">Create Account</h2>
        {% if error %}
          <div class="alert alert-danger" role="alert">{{ error }}</div>
        {% endif %}
        <form method="post" onsubmit="return validatePhone()">
          <div class="form-floating mb-3">
            <input type="text" class="form-control" id="registerName" name="name" placeholder="Full Name" required>
            <label for="registerName">Full Name</label>
          </div>
          <div class="form-floating mb-3">
            <input type="text" class="form-control" id="registerPhone" name="phone" placeholder="Phone Number" pattern="\d{10}" maxlength="10" minlength="10" required>
            <label for="registerPhone">Phone Number</label>
            <div class="invalid-feedback" id="phoneError">Phone number must be exactly 10 digits.</div>
          </div>
          <div class="form-floating mb-3">
            <input type="email" class="form-control" id="registerEmail" name="email" placeholder="Email" required>
            <label for="registerEmail">Email</label>
          </div>
          <div class="form-floating mb-3">
            <input type="password" class="form-control" id="registerPassword" name="password" placeholder="Password" required>
            <label for="registerPassword">Password</label>
          </div>
          <div class="form-floating mb-3">
            <input type="password" class="form-control" id="registerConfirm" name="confirm_password" placeholder="Confirm Password" required>
            <label for="registerConfirm">Confirm Password</label>
          </div>
          <button type="submit" class="btn btn-custom w-100 py-2">Register</button>
        </form>
        <div class="mt-3 text-center">
          <span>Already have an account?</span> <a href="/login">Login</a>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
function validatePhone() {
  var phoneInput = document.getElementById('registerPhone');
  var phoneError = document.getElementById('phoneError');
  var phone = phoneInput.value.trim();
  if (!/^\d{10}$/.test(phone)) {
    phoneInput.classList.add('is-invalid');
    phoneError.style.display = 'block';
    return false;
  } else {
    phoneInput.classList.remove('is-invalid');
    phoneError.style.display = 'none';
    return true;
  }
}
</script>
{% endblock %}
